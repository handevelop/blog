---
title:  "WEB 리퀘스트, 리스폰스"
excerpt: ""

categories:
  - java
  - 스터디
last_modified_at: 2020-05-25T08:06:00-05:00
---


# TCP vs UDP

## TCP

- 일대일 연결만 가능

- 손실되면 재전송을 요청해서 신뢰도가 높음

- 데이터의 순서와 무결성이 보장됨

- 속도가 상대적으로 느림

- 높은 신뢰도를 요하는 서비스에 적합

- 연결을 할 때에는 3-way 핸드쉐이크, 끊을 때에는 4-way 핸드쉐이크로 연결을 끊는다

## UDP

- 일대다 연결 가능

- 정보를 받았는지 확인하지 않고 일방적으로 보냄

- 데이터의 순서와 무결성을 보장하지 않음

- 속도가 상대적으로 빠름

- IPTV, 스트리밍 서비스 등에 적합


# HTTP

- TCP/IP 위에서 전송하는 데이터의 규격에 대한 프로토콜

## HTTP 요청/응답의 구조

- 사용자가 브라우저에서 URL 을 입력한다.

- 브라우저가 서버에 요청 메시지를 보낸다.

- 이 때 만약 정적 컨텐츠를 요청을 했다면 웹서버에서 정적 컨텐츠를 찾아 응답하고 아니라면 WAS 를 타서 원하는 작업을 한 뒤에 갖고 온다.

- 서버가 위에서 가져온 응답 데이터를 포함하여 응답 메시지를 브라우저에게 반환한다.

- 브라우저는 반환 받은 응답을 사용자에게 보여주기위해 형식에 맞춰 표시한다.

## HTTP 의 특징

- 단방향성 : 클라이언트가 일방적으로 요청을 보낼 수만 있다

- 비연결성 : 연결이 계속 유지되지 않고 요청에 대한 응답이 끝나면 연결을 끊음 (소켓과 비교되는 특징)

- 무상태성 : 클라이언트와 서버가 연결됭 상태가 아니기 때문에 상태를 가지지 않음 (보완하기 위해 쿠키, 세션, 토큰 등을 사용함)


# 요청은 어떻게 하는건가?

- 그래 TCP/IP 기반의 HTTP 를 이용하여 요청/응답을 주고 받는것은 알겠어. 그런데 어떻게 요청을 하는거지?

- API 라는걸 통해 요청을 주고 받는다. (HTTP API or REST API)

## API

- 프로그램의 구현, DB 의 스키마 등을 알지 못해도 프로그램이 제공하는 기능을 쓸 수 있도록 제공하는 인터페이스를 API 라고 한다.

## REST API

- REpresental State Transfer API 의 약자로 주고 받는 API 에 제약 조건을 두어 클라이언트 - 서버 간 주고받는 API 에 적용하는 디자인 패턴이라고 보면 된다.

- / 로 계층 관계를 나타낸다.

- URI 를 이루는 리소스명은 동사보다는 명사로 표현한다.

- _, 대문자, 파일 확장자는 URI 에 포함시키지 말아야 한다.

- 리소스에 대한 행위는 HTTP 메소드를 이용해야 한다. (GET, POST, PUT, DELETE)

## REST 제약 조건

1. 클라이언트 - 서버간 분리되어야 한다

2. 무상태 : 요청을 통해 클라이언트의 상태를 서버에 저장하면 안되고 캐시나 토큰 등을 이용해야 한다

3. 캐시처리가능 : 클라이언트의 요청을 캐시처리 하여 서버의 부담을 줄여주어야 한다

4. 계층화 : 클라이언트 - 캐시서버 / 로드밸런서 - 서버 와 같이 중간 서버를 둘 수 있다. 클라이언트는 서버에 직접 연결되었는지, 중간 서버에 연결되어 있는지 알 수 없다

5. 코드 온 디맨드 : 서버는 클라이언트가 직접 실행시킬 수 있는 로직을 전송할 수 있다

6. 유니폼 인터페이스 : 각각의 요청은 URI 로 식별된다. 각 요청은 처리 방법에 대한 충분한 정보를 담고 있어야 한다. ex) GET ~~/board/1 -> 1번 게시물을 가져오는 API

7. HATEOAS : 해당 리소스에 대해 할 수 있는 모든 동작에 대한 URI 를 제공한다. ex) 로그인을 했을 때 응답으로 글쓰기, 회원 정보 수정 등에 대한 URI 를 응답에 제공한다.


# HTTP 캐시

- REST 제약 조건 중 캐시처리가능 하다는 제약 조건이 있었는데 캐시란 무엇일까?

- 캐시는 응답의 헤더를 통해 컨텐츠의 길이, 캐시의 유효기간, ETag 등을 전송한다. 캐시의 유효기간이 지나면 서버로부터 다시 읽어들이는데 이 때 서버의 응답과 캐시로 가지고 있던 ETag 가 같다면 업데이트하지 않는다.